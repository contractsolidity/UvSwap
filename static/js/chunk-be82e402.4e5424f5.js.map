{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es.string.repeat.js","webpack:///./src/views/token/upload/index.vue?73d4","webpack:///./src/assets/images/dialog-succes@2x.png","webpack:///./src/views/token/upload/index.vue?c4f1","webpack:///./src/views/token/upload/index.vue","webpack:///./src/components/AppUpload.vue","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./src/components/AppUpload.vue?ce94","webpack:///./src/views/token/upload/index.vue?0d4b","webpack:///./src/components/AppUpload.vue?37a3","webpack:///./node_modules/core-js/modules/es.array.map.js"],"names":["$","repeat","target","proto","module","exports","class","style","src","alt","title","$t","rightText","$router","push","applyFee","clearable","name","placeholder","token","desc","rows","type","maxlength","show-word-limit","Number","usdtAllowance","loading","btnLoading","size","loading-text","apply","approveUsdt","show","showDialog","getImages","multiple","ref","accept","_createForOfIteratorHelper","o","allowArrayLike","it","Symbol","iterator","Array","isArray","unsupportedIterableToArray","length","i","F","s","n","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","props","default","setup","emit","t","ctx","data","limitData","limitSize","temp","files","duration","file","compressor","map","item","key","refs","fileInput","clear","getImgToBase64","result","cb","reader","FileReader","onload","evt","base64","readAsDataURL","refData","render","__scopeId","components","HeadTop","AppUpload","store","address","state","accounts","web3","provider","balance","imgSrc","isPreview","UvStakeContract","UsdtContract","RouterPathContract","initContract","eth","Contract","UvStakeAbi","config","uvStakeAddress","routerPath","usdtAddress","initData","getUsdtAllowance","getApplyFee","imgSrcHandle","img","methods","decimals","call","balanceOf","usdtBalance","fee","dividedBy","toFixed","allowance","approve","send","from","getBestPathAmount","amount","applyToken","val","$map","arrayMethodHasSpeciesSupport","HAS_SPECIES_SUPPORT","forced","callbackfn","this","arguments","undefined"],"mappings":"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","file":"static/js/chunk-be82e402.4e5424f5.js","sourcesContent":["var $ = require('../internals/export');\nvar repeat = require('../internals/string-repeat');\n\n// `String.prototype.repeat` method\n// https://tc39.es/ecma262/#sec-string.prototype.repeat\n$({ target: 'String', proto: true }, {\n  repeat: repeat\n});\n","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=0&id=1a415502&lang=less&scoped=true\"","module.exports = \"data:image/png;base64,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\"","export * from \"-!../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./index.vue?vue&type=style&index=1&id=1a415502&lang=less\"","<template>\r\n  <div class=\"container\">\r\n    <HeadTop :title=\"$t('index.上幣記錄')\">\r\n      <template v-slot:rightText>\r\n        <span @click=\"$router.push({name:'RecordUploadToken'})\">{{$t('index.記錄')}}</span>\r\n      </template>\r\n    </HeadTop>\r\n    <div class=\"upload\">\r\n      <div class=\"info-wrap\">\r\n        <div class=\"key\">{{$t('index.上幣須知：')}}</div>\r\n        <div class=\"value\">{{$t('index.當前僅支持BSC鏈代幣，上幣前請先前往SWAP創建該代幣與USDT的流動性，創建成功後，支付key即上幣成功，並開放該代幣的的質押挖礦',{key: applyFee + ' USDT'})}}</div>\r\n      </div>\r\n      <div class=\"form\">\r\n        <div class=\"li flex-between\">\r\n          <div class=\"label\">{{$t('index.代幣名字')}}</div>\r\n          <div class=\"input-wrap flex-middle flex-between\">\r\n            <van-field :clearable=\"true\" v-model=\"name\" :placeholder=\"$t('index.請輸入项目名称')\">\r\n            </van-field>\r\n          </div>\r\n        </div>\r\n        <div class=\"li flex-between\">\r\n          <div class=\"label\">{{$t('index.合約地址')}}</div>\r\n          <div class=\"input-wrap flex-middle flex-between\">\r\n            <van-field :clearable=\"true\" v-model=\"token\" :placeholder=\"$t('index.請輸入代币合約地址')\">\r\n            </van-field>\r\n          </div>\r\n        </div>\r\n        <!-- <div class=\"li flex-between border-1px-b\">\r\n          <div class=\"label\">{{$t('index.代幣圖標')}}</div>\r\n          <label class=\"label-wrap flex-middle flex-between\">\r\n            <img v-if=\"imgSrc\" :src=\"imgSrc\" alt=\"\" width=\"80\">\r\n            <img v-else class=\"icon\" src=\"@/assets/images/upload@2x.png\" alt=\"\" width=\"80\">\r\n            <AppUpload @imgSrc=\"imgSrcHandle\" />\r\n          </label>\r\n        </div> -->\r\n        <div class=\"li\" style=\"display:block;\">\r\n          <div class=\"label\">{{$t('index.項目詳情')}}</div>\r\n          <div class=\"textarea-wrap flex-middle flex-between\">\r\n            <!-- <textarea rows=\"1\" v-model=\"desc\" :placeholder=\"$t('index.請輸入不多於key字',{key:100})\"></textarea> -->\r\n            <van-field v-model=\"desc\" rows=\"1\"  type=\"textarea\" maxlength=\"100\" :placeholder=\"$t('index.請輸入不多於key字',{key:100})\" show-word-limit />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div class=\"btn-wrap\">\r\n        <van-button v-if=\"Number(usdtAllowance)>0\" class=\"btn\" :loading=\"btnLoading\" size=\"large\" :loading-text=\"$t('index.提交') + '...'\" @click=\"apply\">{{$t('index.提交')}}</van-button>\r\n        <van-button v-else class=\"btn\" :loading=\"btnLoading\" size=\"large\" :loading-text=\"$t('index.授權') + '...'\" @click=\"approveUsdt\">{{$t('index.授權key',{key:'USDT'})}}</van-button>\r\n      </div>\r\n      <van-dialog v-model:show=\"showDialog\">\r\n        <img class=\"img\" src=\"@/assets/images/dialog-succes@2x.png\" alt=\"\">\r\n        <div class=\"text\">{{$t('index.上幣成功')}}</div>\r\n      </van-dialog>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script>\r\nimport HeadTop from '@/components/HeadTop'\r\nimport { reactive, toRefs, computed, watch } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\nimport { useStore } from \"vuex\";\r\nimport config from \"@/utils/config\";\r\nimport tokenAbi from \"@/utils/abi\";\r\nimport UvStakeAbi from \"@/utils/UvStakeAbi\";\r\nimport { Toast } from 'vant';\r\nimport { MaxUint256 } from \"@ethersproject/constants\";\r\nimport BigNumber from 'bignumber.js';\r\nimport AppUpload from '@/components/AppUpload'\r\nimport routerPath from \"@/utils/routerPath\";\r\nexport default {\r\n  components: {\r\n    HeadTop,\r\n    AppUpload\r\n  },\r\n  setup () {\r\n    const store = useStore()\r\n    const { t } = useI18n()\r\n    const data = reactive({\r\n      $t: t,\r\n      address: computed(() => store.state.accounts[0]),\r\n      web3: computed(() => store.state.provider),\r\n      balance: 0,\r\n      imgSrc: '',\r\n      name: '',\r\n      token: '',\r\n      desc: '',\r\n      isPreview: false,\r\n      showDialog: false,\r\n      UvStakeContract: null,\r\n      UsdtContract: null,\r\n      RouterPathContract: null,\r\n      usdtAllowance: 0,\r\n      applyFee: '0',\r\n      btnLoading: false,\r\n      initContract: () => {\r\n        data.UvStakeContract = new data.web3.eth.Contract(UvStakeAbi, config.uvStakeAddress)\r\n        data.RouterPathContract = new data.web3.eth.Contract(routerPath, config.routerPath)\r\n        data.UsdtContract = new data.web3.eth.Contract(tokenAbi, config.usdtAddress)\r\n        data.initData()\r\n      },\r\n      initData: () => {\r\n        data.getUsdtAllowance()\r\n        data.getApplyFee()\r\n      },\r\n      imgSrcHandle: (img) => {\r\n        data.imgSrc = img\r\n      },\r\n      getApplyFee: async () => {\r\n        let decimals = await data.UsdtContract.methods.decimals().call();\r\n        let usdtBalance = await data.UsdtContract.methods.balanceOf(data.address).call()\r\n        let fee = await data.UvStakeContract.methods.applyFee().call()\r\n        data.applyFee = new BigNumber(fee).dividedBy(10 ** decimals).toFixed(4)\r\n        data.balanceOf = new BigNumber(usdtBalance).dividedBy(10 ** decimals).toFixed(4)\r\n      },\r\n      getUsdtAllowance: async () => {\r\n        let result = await data.UsdtContract.methods.allowance(data.address, config.uvStakeAddress).call();\r\n        data.usdtAllowance = result;\r\n      },\r\n      approveUsdt: async () => {\r\n        data.btnLoading = true\r\n        try {\r\n          await data.UsdtContract.methods.approve(config.uvStakeAddress, MaxUint256).send({ from: data.address });\r\n        data.getUsdtAllowance()\r\n         data.btnLoading = false\r\n        } catch (error) {\r\n          data.btnLoading = false\r\n        }\r\n       \r\n      },\r\n      apply: async () => {\r\n        if (!data.name) {\r\n          Toast(data.$t('index.請輸入項目名稱'))\r\n          return\r\n        }\r\n        if (!data.token) {\r\n          Toast(data.$t('index.請輸入合約地址'))\r\n          return\r\n        }\r\n        // if (!data.imgSrc) {\r\n        //   Toast(data.$t('index.請上傳圖標'))\r\n        //   return\r\n        // }\r\n        if (!data.desc) {\r\n          Toast(data.$t('index.請輸入項目描述'))\r\n          return\r\n        }\r\n        let amount = await data.RouterPathContract.methods.getBestPathAmount(config.usdtAddress, data.token, 1+ '0'.repeat(18)).call()\r\n        if(Number(amount) <= 0) {\r\n          Toast(data.$t('index.請先添加交易對'))\r\n          return\r\n        }\r\n        data.btnLoading = true\r\n        try {\r\n          await data.UvStakeContract.methods.applyToken(data.name, data.token, data.desc).send({ from: data.address });\r\n          data.showDialog = true;\r\n          data.btnLoading = false\r\n        } catch (error) {\r\n          Toast(data.$t('index.代幣錯誤'))\r\n        }\r\n\r\n      }\r\n    })\r\n    if (data.address) {\r\n      data.initContract()\r\n    }\r\n    watch(() => data.address, (val) => {\r\n      if (val) {\r\n        data.initContract()\r\n      }\r\n    })\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.upload {\r\n  padding: 16px;\r\n  .info-wrap {\r\n    color: @theme-color;\r\n    background: #fff;\r\n    border-radius: 20px;\r\n    padding: 16px;\r\n    display: flex;\r\n    flex-wrap: wrap;\r\n    margin-bottom: 12px;\r\n    .key {\r\n      flex-shrink: 0;\r\n      font-size: 16px;\r\n      font-weight: 600;\r\n      padding-bottom: 8.5px;\r\n    }\r\n    .value {\r\n      font-size: 14px;\r\n      line-height: 1.5;\r\n    }\r\n  }\r\n  .form {\r\n    border-radius: 12px;\r\n    background: #fff;\r\n    padding: 16px;\r\n    margin-bottom: 20px;\r\n    .li {\r\n      align-items: center;\r\n      display: flex;\r\n      margin-bottom: 12px;\r\n      &:last-child {\r\n        margin-bottom: 0;\r\n      }\r\n    }\r\n    .input-wrap {\r\n      background: #ededf0;\r\n      border-radius: 8px;\r\n      padding: 0 16px;\r\n      flex-grow: 1;\r\n    }\r\n    .label {\r\n      min-width: 70px;\r\n      font-size: 14px;\r\n      color: @c3;\r\n      font-weight: 600;\r\n      flex-shrink: 0;\r\n    }\r\n    .label-wrap {\r\n      padding: 0 0 16px;\r\n    }\r\n    .textarea-wrap {\r\n      padding-top: 16px;\r\n    }\r\n    textarea {\r\n      height: 80px;\r\n      font-size: 14px;\r\n      display: block;\r\n      box-sizing: border-box;\r\n      width: 100%;\r\n      min-width: 0;\r\n      margin: 0;\r\n      padding: 0;\r\n      line-height: inherit;\r\n      text-align: left;\r\n      background-color: transparent;\r\n      border: 0;\r\n      resize: none;\r\n      user-select: auto;\r\n    }\r\n  }\r\n  .btn-wrap {\r\n    .btn {\r\n      background: @theme-color;\r\n      color: #fff;\r\n      height: 48px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"less\">\r\n.upload {\r\n  .input-wrap {\r\n    .van-field__body {\r\n      input {\r\n        height: 44px;\r\n      }\r\n    }\r\n    .van-cell {\r\n      background: transparent;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div>\r\n    <!-- capture=\"camera\" -->\r\n    <input @change=\"getImages\" :multiple=\"multiple\" type=\"file\" class=\"btn\" ref=\"fileInput\" accept=\"image/*\">\r\n  </div>\r\n</template>\r\n<script>\r\nimport { Toast } from 'vant';\r\nimport { reactive, toRefs, getCurrentInstance } from \"vue\";\r\nimport { useI18n } from \"vue-i18n\";\r\nexport default {\r\n  props: {\r\n    type: {\r\n      default: 'icon'\r\n    },\r\n    multiple: {\r\n      default: false\r\n    }\r\n  },\r\n  setup (props, { emit }) {\r\n    const { t } = useI18n()\r\n    const ctx = getCurrentInstance()\r\n    const data = reactive({\r\n      $t: t,\r\n      limitData: [\r\n        {\r\n          type: 'icon',\r\n          size: 1 * 1024 * 150\r\n        },\r\n      ],\r\n      limitSize: 0,\r\n      temp: 0,\r\n      type: props.type,\r\n      multiple: props.multiple\r\n    })\r\n    const getImages = (e) => {\r\n      let files = e.target.files\r\n      if (!(files && files.length)) {\r\n        return\r\n      }\r\n      Toast.loading({\r\n        duration: 0\r\n      });\r\n      for (let file of files) {\r\n        compressor(file)\r\n      }\r\n    }\r\n    const compressor = (file) => {\r\n      let size = file.size\r\n      data.limitData.map(item => {\r\n        item.type === data.type ? data.limitSize = item.size : ''\r\n      })\r\n      if (size > data.limitSize) {\r\n        data.limitSize / 1024 / 1024 >= 1 ? data.temp = data.limitSize / 1024 / 1024 + 'MB' : data.temp = data.limitSize / 1024 + 'KB'\r\n        Toast(data.$t('index.圖片大小不能超過', { key: data.temp }))\r\n        ctx.refs.fileInput.value = ''\r\n        Toast.clear()\r\n        return false\r\n      }\r\n      getImgToBase64(file, function (result) {\r\n        Toast.clear()\r\n        emit('imgSrc', result)\r\n      });\r\n    }\r\n    const getImgToBase64 = (file, cb) => {\r\n      let reader = new FileReader();\r\n      reader.onload = function (evt) {\r\n        let base64 = evt.target.result;\r\n        cb(base64);\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n    const refData = toRefs(data);\r\n    return {\r\n      ...refData,\r\n      getImages,\r\n      compressor,\r\n      getImgToBase64\r\n    };\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\n.btn {\r\n  display: block;\r\n  width: 1px;\r\n  height: 1px;\r\n  opacity: 0;\r\n}\r\n</style>\r\n","import unsupportedIterableToArray from \"./unsupportedIterableToArray.js\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","import { render } from \"./AppUpload.vue?vue&type=template&id=8b19c410&scoped=true\"\nimport script from \"./AppUpload.vue?vue&type=script&lang=js\"\nexport * from \"./AppUpload.vue?vue&type=script&lang=js\"\n\nimport \"./AppUpload.vue?vue&type=style&index=0&id=8b19c410&lang=less&scoped=true\"\nscript.render = render\nscript.__scopeId = \"data-v-8b19c410\"\n\nexport default script","import { render } from \"./index.vue?vue&type=template&id=1a415502&scoped=true\"\nimport script from \"./index.vue?vue&type=script&lang=js\"\nexport * from \"./index.vue?vue&type=script&lang=js\"\n\nimport \"./index.vue?vue&type=style&index=0&id=1a415502&lang=less&scoped=true\"\nimport \"./index.vue?vue&type=style&index=1&id=1a415502&lang=less\"\nscript.render = render\nscript.__scopeId = \"data-v-1a415502\"\n\nexport default script","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--10-oneOf-1-1!../../node_modules/vue-loader-v16/dist/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../node_modules/style-resources-loader/lib/index.js??ref--10-oneOf-1-4!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader-v16/dist/index.js??ref--0-1!./AppUpload.vue?vue&type=style&index=0&id=8b19c410&lang=less&scoped=true\"","'use strict';\nvar $ = require('../internals/export');\nvar $map = require('../internals/array-iteration').map;\nvar arrayMethodHasSpeciesSupport = require('../internals/array-method-has-species-support');\n\nvar HAS_SPECIES_SUPPORT = arrayMethodHasSpeciesSupport('map');\n\n// `Array.prototype.map` method\n// https://tc39.es/ecma262/#sec-array.prototype.map\n// with adding support of @@species\n$({ target: 'Array', proto: true, forced: !HAS_SPECIES_SUPPORT }, {\n  map: function map(callbackfn /* , thisArg */) {\n    return $map(this, callbackfn, arguments.length > 1 ? arguments[1] : undefined);\n  }\n});\n"],"sourceRoot":""}